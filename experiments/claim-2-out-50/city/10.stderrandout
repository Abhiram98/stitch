[38;5;4;1m**********[0m
[38;5;4;1m* Stitch *[0m
[38;5;4;1m**********[0m
Programs:
	 num: 200
	 max cost: 32521
	 max depth: 219
> Running with train/test split active
Programs:
	 num: 50
	 max cost: 29289
	 max depth: 199
[38;5;4;1m
=======Iteration 0=======[0m
set up egraph: 10ms
got roots, treenodes, and cloned egraph contents: 58ms
num_paths_to_node(): 8ms
associate_tasks() and other task stuff: 3ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 1ms
get_zippers(): 1654ms
871 zips
arg_of_zid_node size: 871
Tracking setup: 0ms
arity 0: 6ms
got 2235 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 1745ms
running pattern search...
TOTAL SEARCH: 8815ms
TOTAL PREP + SEARCH: 10560ms
Stats { worklist_steps: 308870, finished: 8, calc_final_utility: 20074, upper_bound_fired: 38902, free_vars_fired: 0, single_use_fired: 24847, single_task_fired: 11635, useless_abstract_fired: 205763, force_multiuse_fired: 1776 }
Cost before: 3273715
0: utility: 663670 | final_cost: 2609539 | 1.25x | uses: 1644 | body: [fn_0 arity=2: (#1 (l #0) h (r 4) h)]
post stuff: 46ms
Chose Invention fn_0: utility: 663670 | final_cost: 2609539 | 1.25x | uses: 1644 | body: [fn_0 arity=2: (#1 (l #0) h (r 4) h)]
[38;5;4;1m
=======Iteration 1=======[0m
set up egraph: 8ms
got roots, treenodes, and cloned egraph contents: 31ms
num_paths_to_node(): 3ms
associate_tasks() and other task stuff: 2ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 2118ms
531239 zips
arg_of_zid_node size: 531239
Tracking setup: 0ms
arity 0: 7ms
got 1729 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 2173ms
running pattern search...
TOTAL SEARCH: 4767ms
TOTAL PREP + SEARCH: 6941ms
Stats { worklist_steps: 221820, finished: 5, calc_final_utility: 18928, upper_bound_fired: 22527, free_vars_fired: 0, single_use_fired: 14318, single_task_fired: 8931, useless_abstract_fired: 138660, force_multiuse_fired: 1219 }
Cost before: 2609539
0: utility: 398945 | final_cost: 2209579 | 1.18x | uses: 330 | body: [fn_1 arity=3: (#2 (#0 1) t (#1 2) t (#0 6) t (#1 2) t (#0 1) h)]
post stuff: 17ms
Chose Invention fn_1: utility: 398945 | final_cost: 2209579 | 1.18x | uses: 330 | body: [fn_1 arity=3: (#2 (#0 1) t (#1 2) t (#0 6) t (#1 2) t (#0 1) h)]
[38;5;4;1m
=======Iteration 2=======[0m
set up egraph: 7ms
got roots, treenodes, and cloned egraph contents: 22ms
num_paths_to_node(): 3ms
associate_tasks() and other task stuff: 2ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 1171ms
448937 zips
arg_of_zid_node size: 448937
Tracking setup: 0ms
arity 0: 4ms
got 1472 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 1212ms
running pattern search...
TOTAL SEARCH: 3536ms
TOTAL PREP + SEARCH: 4748ms
Stats { worklist_steps: 207379, finished: 6, calc_final_utility: 16988, upper_bound_fired: 20714, free_vars_fired: 0, single_use_fired: 15164, single_task_fired: 7365, useless_abstract_fired: 135865, force_multiuse_fired: 1049 }
Cost before: 2209579
0: utility: 243914 | final_cost: 1963947 | 1.13x | uses: 152 | body: [fn_2 arity=2: (fn_0 6 (fn_0 10 (fn_0 #1 #0 (r 4) h (r 4) h) (r 4) h) (l 2) h)]
post stuff: 14ms
Chose Invention fn_2: utility: 243914 | final_cost: 1963947 | 1.13x | uses: 152 | body: [fn_2 arity=2: (fn_0 6 (fn_0 10 (fn_0 #1 #0 (r 4) h (r 4) h) (r 4) h) (l 2) h)]
[38;5;4;1m
=======Iteration 3=======[0m
set up egraph: 5ms
got roots, treenodes, and cloned egraph contents: 17ms
num_paths_to_node(): 2ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 884ms
335291 zips
arg_of_zid_node size: 335291
Tracking setup: 0ms
arity 0: 4ms
got 1269 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 917ms
running pattern search...
TOTAL SEARCH: 3457ms
TOTAL PREP + SEARCH: 4375ms
Stats { worklist_steps: 233963, finished: 4, calc_final_utility: 18505, upper_bound_fired: 22365, free_vars_fired: 0, single_use_fired: 21993, single_task_fired: 6617, useless_abstract_fired: 150832, force_multiuse_fired: 1118 }
Cost before: 1963947
0: utility: 199472 | final_cost: 1763967 | 1.11x | uses: 396 | body: [fn_3 arity=3: (fn_0 #1 (#2 (l #1) t (r #0) t))]
post stuff: 13ms
Chose Invention fn_3: utility: 199472 | final_cost: 1763967 | 1.11x | uses: 396 | body: [fn_3 arity=3: (fn_0 #1 (#2 (l #1) t (r #0) t))]
[38;5;4;1m
=======Iteration 4=======[0m
set up egraph: 4ms
got roots, treenodes, and cloned egraph contents: 14ms
num_paths_to_node(): 2ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 672ms
261421 zips
arg_of_zid_node size: 261421
Tracking setup: 0ms
arity 0: 3ms
got 1167 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 699ms
running pattern search...
TOTAL SEARCH: 2699ms
TOTAL PREP + SEARCH: 3399ms
Stats { worklist_steps: 199957, finished: 8, calc_final_utility: 15436, upper_bound_fired: 18794, free_vars_fired: 0, single_use_fired: 20354, single_task_fired: 5901, useless_abstract_fired: 130447, force_multiuse_fired: 940 }
Cost before: 1763967
0: utility: 187150 | final_cost: 1575097 | 1.12x | uses: 173 | body: [fn_4 arity=3: (#2 (r 3) t (l 4) t (r #0) h #1 h (r 3) t (l 4) t (r #0) h)]
post stuff: 8ms
Chose Invention fn_4: utility: 187150 | final_cost: 1575097 | 1.12x | uses: 173 | body: [fn_4 arity=3: (#2 (r 3) t (l 4) t (r #0) h #1 h (r 3) t (l 4) t (r #0) h)]
[38;5;4;1m
=======Iteration 5=======[0m
set up egraph: 4ms
got roots, treenodes, and cloned egraph contents: 11ms
num_paths_to_node(): 1ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 499ms
226009 zips
arg_of_zid_node size: 226009
Tracking setup: 0ms
arity 0: 3ms
got 1046 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 522ms
running pattern search...
TOTAL SEARCH: 1547ms
TOTAL PREP + SEARCH: 2069ms
Stats { worklist_steps: 105957, finished: 6, calc_final_utility: 9917, upper_bound_fired: 13086, free_vars_fired: 0, single_use_fired: 14441, single_task_fired: 5285, useless_abstract_fired: 75296, force_multiuse_fired: 354 }
Cost before: 1575097
0: utility: 173518 | final_cost: 1400569 | 1.12x | uses: 192 | body: [fn_5 arity=1: (#0 t (r 3) h (l 1) t (l 3) h)]
post stuff: 8ms
Chose Invention fn_5: utility: 173518 | final_cost: 1400569 | 1.12x | uses: 192 | body: [fn_5 arity=1: (#0 t (r 3) h (l 1) t (l 3) h)]
[38;5;4;1m
=======Iteration 6=======[0m
set up egraph: 3ms
got roots, treenodes, and cloned egraph contents: 9ms
num_paths_to_node(): 1ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 367ms
190883 zips
arg_of_zid_node size: 190883
Tracking setup: 0ms
arity 0: 3ms
got 943 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 387ms
running pattern search...
TOTAL SEARCH: 1145ms
TOTAL PREP + SEARCH: 1533ms
Stats { worklist_steps: 88652, finished: 3, calc_final_utility: 8489, upper_bound_fired: 12898, free_vars_fired: 0, single_use_fired: 10247, single_task_fired: 4713, useless_abstract_fired: 69311, force_multiuse_fired: 538 }
Cost before: 1400569
0: utility: 119885 | final_cost: 1280278 | 1.09x | uses: 397 | body: [fn_6 arity=3: (#2 (r #1) h (#0 4) h)]
post stuff: 13ms
Chose Invention fn_6: utility: 119885 | final_cost: 1280278 | 1.09x | uses: 397 | body: [fn_6 arity=3: (#2 (r #1) h (#0 4) h)]
[38;5;4;1m
=======Iteration 7=======[0m
set up egraph: 3ms
got roots, treenodes, and cloned egraph contents: 6ms
num_paths_to_node(): 1ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 264ms
145541 zips
arg_of_zid_node size: 145541
Tracking setup: 0ms
arity 0: 2ms
got 803 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 281ms
running pattern search...
TOTAL SEARCH: 1205ms
TOTAL PREP + SEARCH: 1487ms
Stats { worklist_steps: 139816, finished: 3, calc_final_utility: 10391, upper_bound_fired: 17630, free_vars_fired: 0, single_use_fired: 16916, single_task_fired: 3957, useless_abstract_fired: 96955, force_multiuse_fired: 576 }
Cost before: 1280278
0: utility: 78779 | final_cost: 1200286 | 1.07x | uses: 111 | body: [fn_7 arity=2: (fn_1 r l (fn_1 r l (#1 h) h (#0 4) h h) h)]
post stuff: 7ms
Chose Invention fn_7: utility: 78779 | final_cost: 1200286 | 1.07x | uses: 111 | body: [fn_7 arity=2: (fn_1 r l (fn_1 r l (#1 h) h (#0 4) h h) h)]
[38;5;4;1m
=======Iteration 8=======[0m
set up egraph: 3ms
got roots, treenodes, and cloned egraph contents: 6ms
num_paths_to_node(): 1ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 222ms
123007 zips
arg_of_zid_node size: 123007
Tracking setup: 0ms
arity 0: 2ms
got 768 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 238ms
running pattern search...
TOTAL SEARCH: 832ms
TOTAL PREP + SEARCH: 1071ms
Stats { worklist_steps: 82304, finished: 3, calc_final_utility: 7585, upper_bound_fired: 15750, free_vars_fired: 0, single_use_fired: 13302, single_task_fired: 3705, useless_abstract_fired: 65751, force_multiuse_fired: 310 }
Cost before: 1200286
0: utility: 72108 | final_cost: 1127566 | 1.06x | uses: 80 | body: [fn_8 arity=3: (fn_3 #0 #2 (fn_3 #0 #2 (fn_0 #2 (#1 t (r #0) t))))]
post stuff: 6ms
Chose Invention fn_8: utility: 72108 | final_cost: 1127566 | 1.06x | uses: 80 | body: [fn_8 arity=3: (fn_3 #0 #2 (fn_3 #0 #2 (fn_0 #2 (#1 t (r #0) t))))]
[38;5;4;1m
=======Iteration 9=======[0m
set up egraph: 3ms
got roots, treenodes, and cloned egraph contents: 5ms
num_paths_to_node(): 1ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 184ms
110797 zips
arg_of_zid_node size: 110797
Tracking setup: 0ms
arity 0: 3ms
got 759 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 199ms
running pattern search...
TOTAL SEARCH: 930ms
TOTAL PREP + SEARCH: 1130ms
Stats { worklist_steps: 95165, finished: 2, calc_final_utility: 9070, upper_bound_fired: 15234, free_vars_fired: 0, single_use_fired: 15944, single_task_fired: 3541, useless_abstract_fired: 75213, force_multiuse_fired: 397 }
Cost before: 1127566
0: utility: 59183 | final_cost: 1068178 | 1.06x | uses: 241 | body: [fn_9 arity=3: (#2 (#2 (#1 h) #0 h))]
post stuff: 8ms
Chose Invention fn_9: utility: 59183 | final_cost: 1068178 | 1.06x | uses: 241 | body: [fn_9 arity=3: (#2 (#2 (#1 h) #0 h))]
[38;5;4;1m
=======Compression Summary=======[0m
Found 10 inventions
Cost Improvement: (3.06x better) 3273715 -> 1068178
[38;5;4mfn_0[0m (1.25x wrt orig): utility: 663670 | final_cost: 2609539 | 1.25x | uses: 1644 | body: [fn_0 arity=2: (#1 (l #0) h (r 4) h)]
[38;5;4mfn_1[0m (1.48x wrt orig): utility: 398945 | final_cost: 2209579 | 1.18x | uses: 330 | body: [fn_1 arity=3: (#2 (#0 1) t (#1 2) t (#0 6) t (#1 2) t (#0 1) h)]
[38;5;4mfn_2[0m (1.67x wrt orig): utility: 243914 | final_cost: 1963947 | 1.13x | uses: 152 | body: [fn_2 arity=2: (fn_0 6 (fn_0 10 (fn_0 #1 #0 (r 4) h (r 4) h) (r 4) h) (l 2) h)]
[38;5;4mfn_3[0m (1.86x wrt orig): utility: 199472 | final_cost: 1763967 | 1.11x | uses: 396 | body: [fn_3 arity=3: (fn_0 #1 (#2 (l #1) t (r #0) t))]
[38;5;4mfn_4[0m (2.08x wrt orig): utility: 187150 | final_cost: 1575097 | 1.12x | uses: 173 | body: [fn_4 arity=3: (#2 (r 3) t (l 4) t (r #0) h #1 h (r 3) t (l 4) t (r #0) h)]
[38;5;4mfn_5[0m (2.34x wrt orig): utility: 173518 | final_cost: 1400569 | 1.12x | uses: 192 | body: [fn_5 arity=1: (#0 t (r 3) h (l 1) t (l 3) h)]
[38;5;4mfn_6[0m (2.56x wrt orig): utility: 119885 | final_cost: 1280278 | 1.09x | uses: 397 | body: [fn_6 arity=3: (#2 (r #1) h (#0 4) h)]
[38;5;4mfn_7[0m (2.73x wrt orig): utility: 78779 | final_cost: 1200286 | 1.07x | uses: 111 | body: [fn_7 arity=2: (fn_1 r l (fn_1 r l (#1 h) h (#0 4) h h) h)]
[38;5;4mfn_8[0m (2.90x wrt orig): utility: 72108 | final_cost: 1127566 | 1.06x | uses: 80 | body: [fn_8 arity=3: (fn_3 #0 #2 (fn_3 #0 #2 (fn_0 #2 (#1 t (r #0) t))))]
[38;5;4mfn_9[0m (3.06x wrt orig): utility: 59183 | final_cost: 1068178 | 1.06x | uses: 241 | body: [fn_9 arity=3: (#2 (#2 (#1 h) #0 h))]
Time: 38389ms
Test set compression with all inventions applied: 3.4071423456514505
Wrote to "claim-2-out-50/city/10.json"
	Command being timed: "../target/release/compress city-10-split.json --hole-choice=depth-first --fmt=split-programs-list --max-arity=3 --iterations=10 --out=claim-2-out-50/city/10.json"
	User time (seconds): 38.35
	System time (seconds): 0.30
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 0:38.69
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 437044
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 170834
	Voluntary context switches: 1
	Involuntary context switches: 3986
	Swaps: 0
	File system inputs: 0
	File system outputs: 5392
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0

[38;5;4;1m**********[0m
[38;5;4;1m* Stitch *[0m
[38;5;4;1m**********[0m
Programs:
	 num: 200
	 max cost: 38076
	 max depth: 253
> Running with train/test split active
Programs:
	 num: 50
	 max cost: 37066
	 max depth: 246
[38;5;4;1m
=======Iteration 0=======[0m
set up egraph: 17ms
got roots, treenodes, and cloned egraph contents: 101ms
num_paths_to_node(): 11ms
associate_tasks() and other task stuff: 6ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 2ms
get_zippers(): 2693ms
1005 zips
arg_of_zid_node size: 1005
Tracking setup: 0ms
arity 0: 5ms
got 1087 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 2838ms
running pattern search...
TOTAL SEARCH: 13077ms
TOTAL PREP + SEARCH: 15916ms
Stats { worklist_steps: 352633, finished: 10, calc_final_utility: 20198, upper_bound_fired: 33190, free_vars_fired: 0, single_use_fired: 26717, single_task_fired: 18676, useless_abstract_fired: 247323, force_multiuse_fired: 2489 }
Cost before: 3817398
0: utility: 681042 | final_cost: 3135850 | 1.22x | uses: 1687 | body: [fn_0 arity=2: (#1 h (r 4) h (l #0))]
post stuff: 55ms
Chose Invention fn_0: utility: 681042 | final_cost: 3135850 | 1.22x | uses: 1687 | body: [fn_0 arity=2: (#1 h (r 4) h (l #0))]
[38;5;4;1m
=======Iteration 1=======[0m
set up egraph: 12ms
got roots, treenodes, and cloned egraph contents: 59ms
num_paths_to_node(): 5ms
associate_tasks() and other task stuff: 3ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 1ms
get_zippers(): 3372ms
827481 zips
arg_of_zid_node size: 827481
Tracking setup: 0ms
arity 0: 4ms
got 833 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 3459ms
running pattern search...
TOTAL SEARCH: 7024ms
TOTAL PREP + SEARCH: 10484ms
Stats { worklist_steps: 225409, finished: 5, calc_final_utility: 16995, upper_bound_fired: 18000, free_vars_fired: 0, single_use_fired: 16287, single_task_fired: 15093, useless_abstract_fired: 146849, force_multiuse_fired: 1349 }
Cost before: 3135850
0: utility: 404601 | final_cost: 2730133 | 1.15x | uses: 309 | body: [fn_1 arity=3: (#2 h (#0 1) t (#1 2) t (#0 6) t (#1 2) t (#0 1) h)]
post stuff: 20ms
Chose Invention fn_1: utility: 404601 | final_cost: 2730133 | 1.15x | uses: 309 | body: [fn_1 arity=3: (#2 h (#0 1) t (#1 2) t (#0 6) t (#1 2) t (#0 1) h)]
[38;5;4;1m
=======Iteration 2=======[0m
set up egraph: 10ms
got roots, treenodes, and cloned egraph contents: 40ms
num_paths_to_node(): 5ms
associate_tasks() and other task stuff: 2ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 2518ms
693145 zips
arg_of_zid_node size: 693145
Tracking setup: 0ms
arity 0: 3ms
got 688 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 2582ms
running pattern search...
TOTAL SEARCH: 6134ms
TOTAL PREP + SEARCH: 8717ms
Stats { worklist_steps: 212215, finished: 4, calc_final_utility: 18678, upper_bound_fired: 18399, free_vars_fired: 0, single_use_fired: 14097, single_task_fired: 13035, useless_abstract_fired: 146709, force_multiuse_fired: 1320 }
Cost before: 2730133
0: utility: 294010 | final_cost: 2434405 | 1.12x | uses: 183 | body: [fn_2 arity=2: (fn_0 2 (fn_0 6 (fn_0 10 (#1 h (r 4) h (r 4)) h (r 4))) h (r #0))]
post stuff: 19ms
Chose Invention fn_2: utility: 294010 | final_cost: 2434405 | 1.12x | uses: 183 | body: [fn_2 arity=2: (fn_0 2 (fn_0 6 (fn_0 10 (#1 h (r 4) h (r 4)) h (r 4))) h (r #0))]
[38;5;4;1m
=======Iteration 3=======[0m
set up egraph: 11ms
got roots, treenodes, and cloned egraph contents: 33ms
num_paths_to_node(): 4ms
associate_tasks() and other task stuff: 2ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 2103ms
590673 zips
arg_of_zid_node size: 590673
Tracking setup: 0ms
arity 0: 7ms
got 689 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 2164ms
running pattern search...
TOTAL SEARCH: 5191ms
TOTAL PREP + SEARCH: 7355ms
Stats { worklist_steps: 199372, finished: 3, calc_final_utility: 16739, upper_bound_fired: 19551, free_vars_fired: 0, single_use_fired: 15341, single_task_fired: 11206, useless_abstract_fired: 140059, force_multiuse_fired: 1367 }
Cost before: 2434405
0: utility: 245529 | final_cost: 2188571 | 1.11x | uses: 1217 | body: [fn_3 arity=3: (#2 (r #1) t (l #0))]
post stuff: 39ms
Chose Invention fn_3: utility: 245529 | final_cost: 2188571 | 1.11x | uses: 1217 | body: [fn_3 arity=3: (#2 (r #1) t (l #0))]
[38;5;4;1m
=======Iteration 4=======[0m
set up egraph: 7ms
got roots, treenodes, and cloned egraph contents: 25ms
num_paths_to_node(): 3ms
associate_tasks() and other task stuff: 2ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 1411ms
581391 zips
arg_of_zid_node size: 581391
Tracking setup: 0ms
arity 0: 2ms
got 620 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 1453ms
running pattern search...
TOTAL SEARCH: 2914ms
TOTAL PREP + SEARCH: 4368ms
Stats { worklist_steps: 126358, finished: 3, calc_final_utility: 12452, upper_bound_fired: 12771, free_vars_fired: 0, single_use_fired: 8912, single_task_fired: 9462, useless_abstract_fired: 94547, force_multiuse_fired: 524 }
Cost before: 2188571
0: utility: 227753 | final_cost: 1960513 | 1.12x | uses: 1129 | body: [fn_4 arity=3: (#2 (r #1) h (l #0))]
post stuff: 43ms
Chose Invention fn_4: utility: 227753 | final_cost: 1960513 | 1.12x | uses: 1129 | body: [fn_4 arity=3: (#2 (r #1) h (l #0))]
[38;5;4;1m
=======Iteration 5=======[0m
set up egraph: 6ms
got roots, treenodes, and cloned egraph contents: 17ms
num_paths_to_node(): 2ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 872ms
424135 zips
arg_of_zid_node size: 424135
Tracking setup: 0ms
arity 0: 2ms
got 585 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 903ms
running pattern search...
TOTAL SEARCH: 2718ms
TOTAL PREP + SEARCH: 3622ms
Stats { worklist_steps: 180764, finished: 6, calc_final_utility: 16028, upper_bound_fired: 15542, free_vars_fired: 0, single_use_fired: 13406, single_task_fired: 7731, useless_abstract_fired: 136346, force_multiuse_fired: 518 }
Cost before: 1960513
0: utility: 112512 | final_cost: 1847393 | 1.06x | uses: 224 | body: [fn_5 arity=3: (fn_4 4 5 (fn_3 #2 #1 (#0 h) t))]
post stuff: 19ms
Chose Invention fn_5: utility: 112512 | final_cost: 1847393 | 1.06x | uses: 224 | body: [fn_5 arity=3: (fn_4 4 5 (fn_3 #2 #1 (#0 h) t))]
[38;5;4;1m
=======Iteration 6=======[0m
set up egraph: 5ms
got roots, treenodes, and cloned egraph contents: 16ms
num_paths_to_node(): 2ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 837ms
423581 zips
arg_of_zid_node size: 423581
Tracking setup: 0ms
arity 0: 2ms
got 569 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 868ms
running pattern search...
TOTAL SEARCH: 2327ms
TOTAL PREP + SEARCH: 3195ms
Stats { worklist_steps: 150767, finished: 5, calc_final_utility: 14741, upper_bound_fired: 12497, free_vars_fired: 0, single_use_fired: 10850, single_task_fired: 7581, useless_abstract_fired: 113487, force_multiuse_fired: 390 }
Cost before: 1847393
0: utility: 107362 | final_cost: 1739121 | 1.06x | uses: 134 | body: [fn_6 arity=2: (fn_4 #1 3 (#0 t (l 3) h (r 1) t))]
post stuff: 13ms
Chose Invention fn_6: utility: 107362 | final_cost: 1739121 | 1.06x | uses: 134 | body: [fn_6 arity=2: (fn_4 #1 3 (#0 t (l 3) h (r 1) t))]
[38;5;4;1m
=======Iteration 7=======[0m
set up egraph: 5ms
got roots, treenodes, and cloned egraph contents: 15ms
num_paths_to_node(): 2ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 738ms
374049 zips
arg_of_zid_node size: 374049
Tracking setup: 0ms
arity 0: 2ms
got 559 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 767ms
running pattern search...
TOTAL SEARCH: 2121ms
TOTAL PREP + SEARCH: 2888ms
Stats { worklist_steps: 143537, finished: 4, calc_final_utility: 13787, upper_bound_fired: 11907, free_vars_fired: 0, single_use_fired: 11263, single_task_fired: 7231, useless_abstract_fired: 108099, force_multiuse_fired: 409 }
Cost before: 1739121
0: utility: 100495 | final_cost: 1638323 | 1.06x | uses: 499 | body: [fn_7 arity=1: (fn_0 2 #0 h)]
post stuff: 21ms
Chose Invention fn_7: utility: 100495 | final_cost: 1638323 | 1.06x | uses: 499 | body: [fn_7 arity=1: (fn_0 2 #0 h)]
[38;5;4;1m
=======Iteration 8=======[0m
set up egraph: 5ms
got roots, treenodes, and cloned egraph contents: 12ms
num_paths_to_node(): 2ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 662ms
340391 zips
arg_of_zid_node size: 340391
Tracking setup: 0ms
arity 0: 2ms
got 491 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 687ms
running pattern search...
TOTAL SEARCH: 2199ms
TOTAL PREP + SEARCH: 2887ms
Stats { worklist_steps: 166268, finished: 4, calc_final_utility: 15466, upper_bound_fired: 11137, free_vars_fired: 0, single_use_fired: 9584, single_task_fired: 6968, useless_abstract_fired: 114728, force_multiuse_fired: 386 }
Cost before: 1638323
0: utility: 84734 | final_cost: 1552978 | 1.05x | uses: 93 | body: [fn_8 arity=3: (#2 (#2 (#2 (#1 h) h #0 h) h #0 h) h)]
post stuff: 11ms
Chose Invention fn_8: utility: 84734 | final_cost: 1552978 | 1.05x | uses: 93 | body: [fn_8 arity=3: (#2 (#2 (#2 (#1 h) h #0 h) h #0 h) h)]
[38;5;4;1m
=======Iteration 9=======[0m
set up egraph: 5ms
got roots, treenodes, and cloned egraph contents: 12ms
num_paths_to_node(): 2ms
associate_tasks() and other task stuff: 1ms
num unique tasks: 200
num unique programs: 200
cost_of_node structs: 0ms
get_zippers(): 603ms
307487 zips
arg_of_zid_node size: 307487
Tracking setup: 0ms
arity 0: 2ms
got 470 arity zero inventions
built SharedData: 0ms
TOTAL PREP: 627ms
running pattern search...
TOTAL SEARCH: 1976ms
TOTAL PREP + SEARCH: 2604ms
Stats { worklist_steps: 156642, finished: 4, calc_final_utility: 14909, upper_bound_fired: 10714, free_vars_fired: 0, single_use_fired: 8554, single_task_fired: 6467, useless_abstract_fired: 105812, force_multiuse_fired: 174 }
Cost before: 1552978
0: utility: 75648 | final_cost: 1476622 | 1.05x | uses: 126 | body: [fn_9 arity=2: (fn_3 3 4 (fn_4 3 #1 #0 t) h)]
post stuff: 13ms
Chose Invention fn_9: utility: 75648 | final_cost: 1476622 | 1.05x | uses: 126 | body: [fn_9 arity=2: (fn_3 3 4 (fn_4 3 #1 #0 t) h)]
[38;5;4;1m
=======Compression Summary=======[0m
Found 10 inventions
Cost Improvement: (2.59x better) 3817398 -> 1476622
[38;5;4mfn_0[0m (1.22x wrt orig): utility: 681042 | final_cost: 3135850 | 1.22x | uses: 1687 | body: [fn_0 arity=2: (#1 h (r 4) h (l #0))]
[38;5;4mfn_1[0m (1.40x wrt orig): utility: 404601 | final_cost: 2730133 | 1.15x | uses: 309 | body: [fn_1 arity=3: (#2 h (#0 1) t (#1 2) t (#0 6) t (#1 2) t (#0 1) h)]
[38;5;4mfn_2[0m (1.57x wrt orig): utility: 294010 | final_cost: 2434405 | 1.12x | uses: 183 | body: [fn_2 arity=2: (fn_0 2 (fn_0 6 (fn_0 10 (#1 h (r 4) h (r 4)) h (r 4))) h (r #0))]
[38;5;4mfn_3[0m (1.74x wrt orig): utility: 245529 | final_cost: 2188571 | 1.11x | uses: 1217 | body: [fn_3 arity=3: (#2 (r #1) t (l #0))]
[38;5;4mfn_4[0m (1.95x wrt orig): utility: 227753 | final_cost: 1960513 | 1.12x | uses: 1129 | body: [fn_4 arity=3: (#2 (r #1) h (l #0))]
[38;5;4mfn_5[0m (2.07x wrt orig): utility: 112512 | final_cost: 1847393 | 1.06x | uses: 224 | body: [fn_5 arity=3: (fn_4 4 5 (fn_3 #2 #1 (#0 h) t))]
[38;5;4mfn_6[0m (2.20x wrt orig): utility: 107362 | final_cost: 1739121 | 1.06x | uses: 134 | body: [fn_6 arity=2: (fn_4 #1 3 (#0 t (l 3) h (r 1) t))]
[38;5;4mfn_7[0m (2.33x wrt orig): utility: 100495 | final_cost: 1638323 | 1.06x | uses: 499 | body: [fn_7 arity=1: (fn_0 2 #0 h)]
[38;5;4mfn_8[0m (2.46x wrt orig): utility: 84734 | final_cost: 1552978 | 1.05x | uses: 93 | body: [fn_8 arity=3: (#2 (#2 (#2 (#1 h) h #0 h) h #0 h) h)]
[38;5;4mfn_9[0m (2.59x wrt orig): utility: 75648 | final_cost: 1476622 | 1.05x | uses: 126 | body: [fn_9 arity=2: (fn_3 3 4 (fn_4 3 #1 #0 t) h)]
Time: 64336ms
Test set compression with all inventions applied: 2.516799705429823
Wrote to "claim-2-out-50/castle/48.json"
	Command being timed: "../target/release/compress castle-48-split.json --hole-choice=depth-first --fmt=split-programs-list --max-arity=3 --iterations=10 --out=claim-2-out-50/castle/48.json"
	User time (seconds): 64.12
	System time (seconds): 0.67
	Percent of CPU this job got: 99%
	Elapsed (wall clock) time (h:mm:ss or m:ss): 1:04.83
	Average shared text size (kbytes): 0
	Average unshared data size (kbytes): 0
	Average stack size (kbytes): 0
	Average total size (kbytes): 0
	Maximum resident set size (kbytes): 686020
	Average resident set size (kbytes): 0
	Major (requiring I/O) page faults: 0
	Minor (reclaiming a frame) page faults: 361703
	Voluntary context switches: 1
	Involuntary context switches: 6437
	Swaps: 0
	File system inputs: 0
	File system outputs: 8592
	Socket messages sent: 0
	Socket messages received: 0
	Signals delivered: 0
	Page size (bytes): 4096
	Exit status: 0
